import { mastodon } from "masto";
import Account from "./account";
import Scorer from "../../scorer/scorer";
import { AccountLike, FeedFilterSettings, MastodonTag, MediaCategory, StatusList, TagWithUsageCounts, TootLike, TootScore, TrendingLink } from "../../types";
export interface SerializableToot extends mastodon.v1.Status {
    numTimesShown?: number;
    completedAt?: string;
    followedTags?: MastodonTag[];
    participatedTags?: TagWithUsageCounts[];
    reblog?: SerializableToot | null;
    reblogsBy?: AccountLike[];
    resolvedToot?: Toot;
    scoreInfo?: TootScore;
    sources?: string[];
    trendingLinks?: TrendingLink[];
    trendingRank?: number;
    trendingTags?: TagWithUsageCounts[];
    audioAttachments?: mastodon.v1.MediaAttachment[];
    imageAttachments?: mastodon.v1.MediaAttachment[];
    videoAttachments?: mastodon.v1.MediaAttachment[];
}
interface TootObj extends SerializableToot {
    ageInHours: () => number;
    alternateScoreInfo: () => ReturnType<typeof Scorer.alternateScoreInfo>;
    attachmentType: () => MediaCategory | undefined;
    containsString: (str: string) => boolean;
    containsTag: (tag: string | MastodonTag, fullScan?: boolean) => boolean;
    containsTagsMsg: () => string | undefined;
    contentString: () => string;
    contentStripped: () => string;
    contentNonTagsParagraphs: (fontSize?: number) => string;
    contentParagraphs: (fontSize?: number) => string[];
    contentShortened: (maxChars?: number) => string;
    contentTagsParagraph: () => string | undefined;
    contentWithEmojis: (fontSize?: number) => string;
    describe: () => string;
    getScore: () => number;
    homeserverURL: () => Promise<string>;
    isDM: () => boolean;
    isFollowed: () => boolean;
    isInTimeline: (filters: FeedFilterSettings) => boolean;
    isPrivate: () => boolean;
    isTrending: () => boolean;
    isValidForFeed: (serverSideFilters: mastodon.v2.Filter[]) => boolean;
    popularity: () => number;
    realAccount: () => Account;
    realToot: () => Toot;
    realURI: () => string;
    resolve: () => Promise<Toot>;
    tootedAt: () => Date;
}
export default class Toot implements TootObj {
    id: string;
    uri: string;
    application: mastodon.v1.Application;
    account: Account;
    content: string;
    createdAt: string;
    editedAt: string | null;
    emojis: mastodon.v1.CustomEmoji[];
    favouritesCount: number;
    mediaAttachments: mastodon.v1.MediaAttachment[];
    mentions: mastodon.v1.StatusMention[];
    reblogsCount: number;
    repliesCount: number;
    sensitive: boolean;
    spoilerText: string;
    tags: mastodon.v1.Tag[];
    visibility: mastodon.v1.StatusVisibility;
    bookmarked?: boolean | null;
    card?: mastodon.v1.PreviewCard | null;
    favourited?: boolean | null;
    filtered?: mastodon.v1.FilterResult[];
    language?: string | null;
    inReplyToId?: string | null;
    inReplyToAccountId?: string | null;
    muted?: boolean | null;
    pinned?: boolean | null;
    poll?: mastodon.v1.Poll | null;
    reblog?: Toot | null;
    reblogged?: boolean | null;
    text?: string | null;
    url?: string | null;
    numTimesShown?: number;
    completedAt?: string;
    followedTags?: mastodon.v1.Tag[];
    participatedTags?: TagWithUsageCounts[];
    reblogsBy: Account[];
    resolvedToot?: Toot;
    scoreInfo?: TootScore;
    sources?: string[];
    trendingLinks?: TrendingLink[];
    trendingRank?: number;
    trendingTags?: TagWithUsageCounts[];
    audioAttachments: mastodon.v1.MediaAttachment[];
    imageAttachments: mastodon.v1.MediaAttachment[];
    videoAttachments: mastodon.v1.MediaAttachment[];
    static build(toot: SerializableToot): Toot;
    ageInHours(): number;
    alternateScoreInfo(): ReturnType<typeof Scorer.alternateScoreInfo>;
    attachmentType(): MediaCategory | undefined;
    containsString(str: string): boolean;
    containsTag(tag: string | MastodonTag, fullScan?: boolean): boolean;
    containsTagsMsg(): string | undefined;
    containsUserMention(): boolean;
    contentNonTagsParagraphs(fontSize?: number): string;
    contentParagraphs(fontSize?: number): string[];
    contentShortened(maxChars?: number): string;
    contentString(): string;
    contentTagsParagraph(): string | undefined;
    contentStripped(): string;
    contentWithEmojis(fontSize?: number): string;
    describe(): string;
    getScore(): number;
    homeserverURL(): Promise<string>;
    isDM(): boolean;
    isFollowed(): boolean;
    isInTimeline(filters: FeedFilterSettings): boolean;
    isPrivate(): boolean;
    isTrending(): boolean;
    isValidForFeed(serverSideFilters: mastodon.v2.Filter[]): boolean;
    popularity(): number;
    realAccount(): Account;
    realToot(): Toot;
    realURI(): string;
    realURL(): string;
    resolve(): Promise<Toot>;
    tootedAt(): Date;
    private addEmojiHtmlTags;
    private attachmentsOfType;
    private completeProperties;
    private containsTagsOfTypeMsg;
    private determineLanguage;
    private isComplete;
    private isUsersOwnToot;
    private repair;
    static buildToots(statuses: TootLike[], source: string, logPrefix?: string): Promise<Toot[]>;
    static completeToots(toots: TootLike[], logPrefix: string, isDeepInspect: boolean): Promise<Toot[]>;
    static dedupeToots(toots: Toot[], logPrefix?: string): Toot[];
    static findMinIdForMaxIdParam(toots: Toot[]): string | null;
    static removeInvalidToots(toots: Toot[], logPrefix: string): Promise<Toot[]>;
    private static uniqFlatMap;
}
export declare const tootedAt: (toot: TootLike) => Date;
export declare const earliestToot: (toots: StatusList) => TootLike | null;
export declare const mostRecentToot: (toots: StatusList) => TootLike | null;
export declare const sortByCreatedAt: (toots: StatusList) => StatusList;
export declare const earliestTootedAt: (toots: StatusList) => Date | null;
export declare const mostRecentTootedAt: (toots: StatusList) => Date | null;
export {};

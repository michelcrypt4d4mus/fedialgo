import { mastodon } from "masto";
import { Mutex } from 'async-mutex';
import Account from "./objects/account";
import Toot from './objects/toot';
import { AccountLike, StatusList, StorageKey, TimelineData, UserData, WeightName } from "../types";
export declare const INSTANCE = "instance";
export declare const LINKS = "links";
export declare const STATUSES = "statuses";
export declare const TAGS = "tags";
type ApiMutex = Record<StorageKey | WeightName, Mutex>;
export declare class MastoApi {
    #private;
    api: mastodon.rest.Client;
    user: mastodon.v1.Account;
    homeDomain: mastodon.v1.Account["url"];
    mutexes: ApiMutex;
    static init(api: mastodon.rest.Client, user: mastodon.v1.Account): void;
    static get instance(): MastoApi;
    private constructor();
    getTimelineToots(numTimelineToots?: number, maxId?: string): Promise<TimelineData>;
    getStartupData(): Promise<UserData>;
    fetchHomeFeed(numToots?: number, maxId?: string | number): Promise<Toot[]>;
    searchForToots(searchQuery: string, limit?: number): Promise<Toot[]>;
    getUserRecentToots(): Promise<Toot[]>;
    fetchFollowedAccounts(): Promise<Account[]>;
    getFollowedTags(): Promise<mastodon.v1.Tag[]>;
    getRecentNotifications(): Promise<mastodon.v1.Notification[]>;
    fetchRecentFavourites(): Promise<StatusList>;
    fetchBlockedAccounts(): Promise<Account[]>;
    fetchMutedAccounts(): Promise<Account[]>;
    getServerSideFilters(): Promise<mastodon.v2.Filter[]>;
    getTopServerDomains(): Promise<string[]>;
    getAccountURL(account: AccountLike): string;
    resolveToot(toot: Toot): Promise<Toot>;
    private fetchData;
    private shouldReloadFeatures;
    private throwIfAccessTokenRevoked;
    static buildParams(maxId?: number | string, limit?: number): mastodon.DefaultPaginationParams;
    static v1Url: (path: string) => string;
    static v2Url: (path: string) => string;
    static trendUrl: (path: string) => string;
}
export {};

"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.config = exports.MAX_ENDPOINT_RECORDS_TO_PULL = exports.MIN_RECORDS_FOR_FEATURE_SCORING = void 0;
/**
 * @fileoverview Centralized location for non-user configurable settings.
 */
const environment_helpers_1 = require("./helpers/environment_helpers");
const string_helpers_1 = require("./helpers/string_helpers");
const time_helpers_1 = require("./helpers/time_helpers");
const enums_1 = require("./enums");
// Number of notifications, replies, etc. to pull in initial load. KEY BOTTLENECK on RecentUserToots
exports.MIN_RECORDS_FOR_FEATURE_SCORING = 320;
exports.MAX_ENDPOINT_RECORDS_TO_PULL = 5000;
// Locale
const DEFAULT_LOCALE = "en-CA";
const DEFAULT_LANGUAGE = DEFAULT_LOCALE.split("-")[0];
const DEFAULT_COUNTRY = DEFAULT_LOCALE.split("-")[1];
const LOCALE_REGEX = /^[a-z]{2}(-[A-Za-z]{2})?$/;
const LOG_PREFIX = '[Config]';
;
;
;
;
;
/**
 * Centralized application configuration class for non-user configurable settings.
 *
 * Provides strongly-typed, centralized access to all core settings for API requests,
 * locale, scoring, trending, and fediverse-wide data. It includes logic for environment-specific overrides
 * (debug, quick load, load test), validation of config values, and locale/language management.
 *
 * @class
 * @implements {ConfigType}
 * @property {ApiConfig} api - API request and caching configuration.
 * @property {TagTootsConfig} favouritedTags - Settings for favourited tags and related toot fetching.
 * @property {FediverseConfig} fediverse - Fediverse-wide server and trending configuration.
 * @property {LocaleConfig} locale - Locale, language, and country settings.
 * @property {ParticipatedTagsConfig} participatedTags - Settings for user's participated tags.
 * @property {ScoringConfig} scoring - Scoring and weighting configuration for toots and tags.
 * @property {TootsConfig} toots - Timeline and toot cache configuration.
 * @property {TrendingConfig} trending - Trending data configuration for links, tags, and toots.
 */
class Config {
    api = {
        // How long to wait between API requests during backgrund load (actually a random number between 0 and this value)
        backgroundLoadSleepBetweenRequestsMS: 1200,
        backgroundLoadIntervalMinutes: 10,
        daysBeforeFullCacheRefresh: 21,
        defaultRecordsPerPage: 40,
        errorMsgs: {
            accessTokenRevoked: "The access token was revoked",
            goToSocialHashtagTimeline: (s) => `GoToSocial servers don't enable ${s} by default, check if yours does.`,
            rateLimitError: "Too many requests",
            rateLimitWarning: "Your Mastodon server is complaining about too many requests coming too quickly. Wait a bit and try again later.",
        },
        maxConcurrentHashtagRequests: 15,
        maxRecordsForFeatureScoring: 1500,
        maxSecondsPerPage: 60,
        minutesUntilStaleDefault: 10,
        mutexWarnSeconds: 10,
        timeoutMS: 2500,
        data: {
            [enums_1.CacheKey.BLOCKED_ACCOUNTS]: {
                initialMaxRecords: exports.MAX_ENDPOINT_RECORDS_TO_PULL,
                minutesUntilStale: 12 * enums_1.MINUTES_IN_HOUR,
            },
            [enums_1.CacheKey.BLOCKED_DOMAINS]: {
                canBeDisabledOnGoToSocial: true,
                initialMaxRecords: exports.MAX_ENDPOINT_RECORDS_TO_PULL,
                minutesUntilStale: enums_1.MINUTES_IN_DAY,
            },
            [enums_1.CacheKey.FAVOURITED_TOOTS]: {
                initialMaxRecords: Math.floor(exports.MIN_RECORDS_FOR_FEATURE_SCORING / 2),
                minutesUntilStale: 12 * enums_1.MINUTES_IN_HOUR,
            },
            [enums_1.CacheKey.FOLLOWED_ACCOUNTS]: {
                initialMaxRecords: 1600,
                limit: 80,
                minutesUntilStale: 12 * enums_1.MINUTES_IN_HOUR,
            },
            [enums_1.CacheKey.FOLLOWED_TAGS]: {
                initialMaxRecords: exports.MAX_ENDPOINT_RECORDS_TO_PULL,
                limit: 100,
                minutesUntilStale: 12 * enums_1.MINUTES_IN_HOUR,
            },
            [enums_1.CacheKey.FOLLOWERS]: {
                initialMaxRecords: 1600,
                limit: 80,
                minutesUntilStale: 24 * enums_1.MINUTES_IN_HOUR,
            },
            [enums_1.CacheKey.HASHTAG_TOOTS]: {
                // hashtag timeline toots are not cached as a group, they're pulled in small amounts and used
                // to create other sets of toots from a lot of small requests, e.g. TRENDING_TAG_TOOTS or PARTICIPATED_TAG_TOOTS
                canBeDisabledOnGoToSocial: true,
            },
            [enums_1.CacheKey.HOME_TIMELINE_TOOTS]: {
                initialMaxRecords: 800,
                lookbackForUpdatesMinutes: 180,
                supportsMinMaxId: true,
            },
            [enums_1.CacheKey.HOMESERVER_TOOTS]: {
                initialMaxRecords: 20,
                minutesUntilStale: 10,
            },
            [enums_1.CacheKey.INSTANCE_INFO]: {
                minutesUntilStale: 30 * enums_1.MINUTES_IN_DAY,
            },
            [enums_1.CacheKey.MUTED_ACCOUNTS]: {
                initialMaxRecords: exports.MAX_ENDPOINT_RECORDS_TO_PULL,
                minutesUntilStale: 12 * enums_1.MINUTES_IN_HOUR,
            },
            [enums_1.CacheKey.NOTIFICATIONS]: {
                initialMaxRecords: exports.MIN_RECORDS_FOR_FEATURE_SCORING,
                limit: 80,
                maxCacheRecords: 10000,
                minutesUntilStale: 6 * enums_1.MINUTES_IN_HOUR,
                supportsMinMaxId: true,
            },
            [enums_1.CacheKey.RECENT_USER_TOOTS]: {
                initialMaxRecords: exports.MIN_RECORDS_FOR_FEATURE_SCORING,
                minutesUntilStale: 2 * enums_1.MINUTES_IN_HOUR,
                supportsMinMaxId: true,
            },
            [enums_1.CacheKey.SERVER_SIDE_FILTERS]: {
                initialMaxRecords: exports.MAX_ENDPOINT_RECORDS_TO_PULL,
                minutesUntilStale: 4 * enums_1.MINUTES_IN_HOUR,
            },
            [enums_1.FediverseCacheKey.POPULAR_SERVERS]: {
                minutesUntilStale: 5 * enums_1.MINUTES_IN_DAY,
            },
            [enums_1.FediverseCacheKey.TRENDING_LINKS]: {
                minutesUntilStale: 4 * enums_1.MINUTES_IN_HOUR,
            },
            [enums_1.FediverseCacheKey.TRENDING_TAGS]: {
                minutesUntilStale: 6 * enums_1.MINUTES_IN_HOUR,
            },
            [enums_1.FediverseCacheKey.TRENDING_TOOTS]: {
                minutesUntilStale: 4 * enums_1.MINUTES_IN_HOUR,
            },
            [enums_1.TagTootsCategory.FAVOURITED]: {
                minutesUntilStale: 60,
            },
            [enums_1.TagTootsCategory.PARTICIPATED]: {
                minutesUntilStale: 20,
            },
            [enums_1.TagTootsCategory.TRENDING]: {
                minutesUntilStale: 15,
            },
        },
    };
    favouritedTags = {
        maxParticipations: 3,
        maxToots: 100,
        numTags: 15,
        numTootsPerTag: 5, // How many toots to pull for each tag
    };
    fediverse = {
        minServerMAU: 100,
        numServersToCheck: 30,
        // Popular servers that are used as fallbacks if the user isn't following accounts on enough
        // servers to make for a good set of trending toots and hashtags.
        // Culled from https://mastodonservers.net and https://joinmastodon.org/ and
        // https://fedidb.com/software/mastodon?registration=open
        defaultServers: [
            "mastodon.social",
            "mastodon.cloud",
            "mastodon.online",
            "mas.to",
            "mastodon.world",
            "loforo.com",
            "c.im",
            "hachyderm.io",
            "infosec.exchange",
            "universeodon.com",
            "kolektiva.social",
            "mastodonapp.uk",
            "ioc.exchange",
            "tech.lgbt",
            "techhub.social",
            "indieweb.social",
            "mastodon.green",
            "defcon.social",
            "mstdn.party",
            "sfba.social",
            "toot.community",
            "ravenation.club",
            "metalhead.club",
            "sciences.social",
            "toot.io",
            "mastodon.ie",
            "mastodon.nz",
            // Servers that are no bueno for various reasons
            // "baraag.net",                 // very NSFW (anime porn)
            // "mstdn.social",               // Slow, blocked by CORS
            // "mastodon.lol",               // Doesn't return MAU data
            // "fosstodon.org",              // Doesn't support trending links/toots
            // "mastodon.technology",        // Doesn't return MAU data
            // "mathstodon.xyz",             // Doesn't return MAU data
        ],
        // Servers chosen first for non english users
        foreignLanguageServers: {
            "de": [
                "troet.cafe",
                "nrw.social",
                "hessen.social",
                "ruhr.social",
                "muenchen.social",
                "social.cologne",
                "social.tchncs.de",
                "sueden.social",
                "mastodontech.de",
                "nerdculture.de",
            ],
            "es": [
                "tkz.one",
                "mast.lat",
                "mastorol.es",
            ],
            "eu": [
                "mastodon.eus",
            ],
            "fr": [
                "piaille.fr",
                "pouet.chapril.org",
                "mastoot.fr",
                "mamot.fr",
                "qlub.social", // Montreal
            ],
            "ja": [
                "mstdn.jp",
                "m.cmx.im",
                "mastodon-japan.net",
                "famichiki.jp",
                // "pawoo.net",                  // (Maybe NSFW?)
            ],
            "pt": [
                "masto.pt",
            ],
            "it": [
                "mastodon.uno",
                "mastodon.bida.im",
                "sociale.network",
            ],
            "ru": [
                "pravda.me",
            ],
            "tr": [
                "mastoturk.org",
            ],
            "zh-cn": [
                "m.cmx.im",
                "m.otter.homes",
                "mast.dragon-fly.club",
                "alive.bar",
                "g0v.social",
                "link.baai.ac.cn",
            ],
        },
        // Non-mastodon servers and/or servers that don't make the MAU data available publicly
        noMauServers: [
            "agora.echelon.pl",
            "amf.didiermary.fr",
            "bsd.network",
            "bsky.brid.gy",
            "fedibird.com",
            "fediverse.one",
            "flipboard.com",
            "mastodon.art",
            "mastodon.gamedev.place",
            "mastodon.sdf.org",
            'mathstodon.xyz',
            "mstdn.social",
            "threads.net",
        ],
        // Servers that don't support trending links
        noTrendingLinksServers: [
            "chaos.social",
            "fediscience.org",
            "mastodon.cloud",
            "med-mastodon.com",
            "toot.io",
        ],
    };
    locale = {
        country: DEFAULT_COUNTRY,
        defaultLanguage: DEFAULT_LANGUAGE,
        language: DEFAULT_LANGUAGE,
        locale: DEFAULT_LOCALE,
        messages: {
            [enums_1.LogAction.FINISH_FEED_UPDATE]: `Finalizing scores`,
            [enums_1.LogAction.INITIAL_LOADING_STATUS]: "Ready to load",
            [enums_1.LoadAction.FEED_UPDATE]: (timeline, since) => {
                if (timeline.length == 0) {
                    return `Loading more toots (retrieved ${timeline.length.toLocaleString()} toots so far)`;
                }
                else {
                    return `Loading new toots` + (0, string_helpers_1.optionalSuffix)(since, `since ${(0, time_helpers_1.timeString)(since)}`);
                }
            },
            [enums_1.LoadAction.GET_CONVERSATION]: `Loading conversation`,
            [enums_1.LoadAction.GET_MOAR_DATA]: `Fetching more data for the algorithm`,
            [enums_1.LoadAction.IS_BUSY]: "Load in progress (consider using the setTimelineInApp() callback instead)",
            [enums_1.LoadAction.PULL_ALL_USER_DATA]: `Pulling your historical data`,
            [enums_1.LoadAction.REFRESH_MUTED_ACCOUNTS]: `Refreshing muted accounts`,
            [enums_1.LoadAction.RESET]: `Resetting state`,
            [enums_1.LoadAction.TIMELINE_BACKFILL]: `Loading older home timeline toots`,
        },
    };
    participatedTags = {
        invalidTags: [
            "eupol",
            "news",
            "uspol",
            "uspolitics",
        ],
        maxToots: 200,
        minPctToCountRetoots: 0.75,
        numTags: 30,
        numTootsPerTag: 10, // How many toots to pull for each participated tag
    };
    scoring = {
        excessiveTags: 25,
        excessiveTagsPenalty: 0.1,
        diversityScorerMinTrendingTagTootsForPenalty: 9,
        diversityScorerRetootMultiplier: 4,
        nonScoreWeightMinValue: 0.001,
        nonScoreWeightsConfig: {
            // Factor in an exponential function that gives a value between 0 and 1. See Scorer class for details.
            [enums_1.NonScoreWeightName.TIME_DECAY]: {
                description: "Higher values favour recent toots more",
            },
            // Trending data has a lot of reblogs, likes, replies, etc. giving disproportionately high scores.
            // To adjust for this we multiply those scores by the TRENDING weighting value.
            [enums_1.NonScoreWeightName.TRENDING]: {
                description: "Multiplier applied to trending toots, tags, and links",
            },
            // If this value is 2 then square root scores, if it's 3 then cube root scores, etc.
            [enums_1.NonScoreWeightName.OUTLIER_DAMPENER]: {
                description: "Dampens the effect of outlier scores",
            },
        },
        scoringBatchSize: 100,
        timeDecayExponent: 1.2, // Exponent for the time decay function (higher = more recent toots are favoured)
    };
    toots = {
        batchCompleteSize: 25,
        batchCompleteSleepBetweenMS: 210,
        completeAfterMinutes: enums_1.MINUTES_IN_DAY,
        filterUpdateBatchSize: 240,
        maxAgeInDays: 7,
        maxContentPreviewChars: 110,
        maxTimelineLength: 3000,
        minCharsForLanguageDetect: 8,
        minToSkipFilterUpdates: 300,
        saveChangesIntervalSeconds: 30,
        truncateFullTimelineToLength: 2000,
        tagOnlyStrings: new Set([
            ...enums_1.DAY_NAMES.map(m => m.toLowerCase()),
            ...enums_1.DAYS_SHORT.map(m => m.toLowerCase()),
            ...enums_1.MONTHS.map(m => m.toLowerCase()),
            ...enums_1.MONTHS_SHORT.map(m => m.toLowerCase()),
            "ab",
            "about",
            "abstract",
            "access",
            "accessed",
            "accessing",
            "accessory",
            "accessories",
            "accident",
            "accidents",
            "account",
            "accountability",
            "accounts",
            "accuracy",
            "achieve",
            "achieved",
            "achieving",
            "across",
            "act",
            "action",
            "actions",
            "activities",
            "activity",
            "activitypub",
            "actu",
            "actual",
            "actualites",
            "add",
            "address",
            "admin",
            "administration",
            "adopt",
            "adopted",
            "adopting",
            "advance",
            "advanced",
            "advances",
            "advancing",
            "advertise",
            "advise",
            "advised",
            "advises",
            "advising",
            "advisory",
            "affect",
            "affected",
            "affecting",
            "affects",
            "affiliated",
            "affiliating",
            "after",
            "afterward",
            "afterwards",
            "again",
            "against",
            "age",
            "agency",
            "agenda",
            "agendas",
            "agent",
            "agents",
            "aggression",
            "ago",
            "agree",
            "agreeable",
            "agreeing",
            "agreement",
            "agreements",
            "agrees",
            "agreed",
            "ahead",
            "aid",
            "air",
            "aktuel",
            "aktuell",
            "alienvault",
            "all",
            "also",
            "alt",
            "alternative",
            "alternatives",
            "am",
            "amaze",
            "amazed",
            "amazing",
            "america",
            "american",
            "americans",
            "americas",
            "amid",
            "amidst",
            "among",
            "amongst",
            "an",
            "animate",
            "animated",
            "animates",
            "ann",
            "anna",
            "announce",
            "announced",
            "announcement",
            "announcements",
            "announcing",
            "analysis",
            "and",
            "angeles",
            "ano",
            "anos",
            "another",
            "answer",
            "answered",
            "answering",
            "answers",
            "anti",
            "app",
            "application",
            "applications",
            "approach",
            "approached",
            "approaches",
            "approaching",
            "apps",
            "ar",
            "archive",
            "are",
            "area",
            "areas",
            "armes",
            "arrive",
            "article",
            "articles",
            "articulate",
            "articulated",
            "articulating",
            "artificial",
            "artificially",
            "arts",
            "as",
            "ask",
            "asked",
            "asking",
            "asp",
            "aspx",
            "ass",
            "asses",
            "assess",
            "assessed",
            "assessing",
            "asshole",
            "assholes",
            "associate",
            "associated",
            "associates",
            "association",
            "at",
            "ate",
            "attention",
            "au",
            "auch",
            "audio",
            "aus",
            "author",
            "authored",
            "authors",
            "authority",
            "authorities",
            "auto",
            "avoid",
            "aware",
            "awareness",
            "away",
            "ayuda",
            "ba",
            "back",
            "backed",
            "backs",
            "bad",
            "badly",
            "bag",
            "bags",
            "bahn",
            "bar",
            "barred",
            "barring",
            "bars",
            "base",
            "based",
            "basic",
            "bay",
            "bc",
            "be",
            "bear",
            "bearing",
            "beat",
            "beats",
            "beautiful",
            "beauty",
            "before",
            "behavior",
            "belief",
            "beliefs",
            "believe",
            "believed",
            "believes",
            "believing",
            "benefit",
            "benefits",
            "best",
            "bet",
            "better",
            "betting",
            "between",
            "beyond",
            "bi",
            "big",
            "bigger",
            "biggest",
            "bild",
            "bilder",
            "bit",
            "biz",
            "black",
            "blame",
            "blamed",
            "blames",
            "blaming",
            "blind",
            "blindly",
            "blinded",
            "blinds",
            "block",
            "blog",
            "bloomberg",
            "blue",
            "bluesky",
            "bodies",
            "body",
            "boost",
            "boosted",
            "boosting",
            "boosts",
            "bot",
            "both",
            "boy",
            "boys",
            "branch",
            "branches",
            "brand",
            "brands",
            "breach",
            "break",
            "breaking",
            "breaks",
            "bright",
            "brighter",
            "brightest",
            "broken",
            "brown",
            "bsky",
            "build",
            "building",
            "business",
            "but",
            "buy",
            "by",
            "bye",
            "ca",
            "caer",
            "call",
            "calls",
            "came",
            "campaign",
            "campaigned",
            "campaigning",
            "campaigns",
            "can",
            "cancel",
            "canceled",
            "cancelled",
            "canceling",
            "cancelling",
            "cancels",
            "cannot",
            "capital",
            "card",
            "care",
            "carry",
            "case",
            "cases",
            "cat",
            "cats",
            "calendar",
            "ce",
            "center",
            "central",
            "certain",
            "certainly",
            "cesko",
            "challenge",
            "change",
            "changed",
            "changing",
            "character",
            "characters",
            "chat",
            "chats",
            "chatting",
            "chief",
            "chiefly",
            "choice",
            "choices",
            "choose",
            "chosen",
            "cine",
            "circle",
            "citizens",
            "city",
            "civil",
            "claim",
            "claimed",
            "claiming",
            "claims",
            "class",
            "classic",
            "club",
            "clubs",
            "cm",
            "cn",
            "co",
            "coast",
            "coasted",
            "coasting",
            "coasts",
            "coin",
            "coins",
            "cold",
            "collaboration",
            "collapse",
            "collapsed",
            "collection",
            "color",
            "colored",
            "colorful",
            "coloring",
            "colors",
            "colour",
            "coloured",
            "colouring",
            "colours",
            "com",
            "come",
            "comment",
            "commentary",
            "commented",
            "commenting",
            "comments",
            "commercial",
            "commission",
            "commissioned",
            "commissions",
            "commit",
            "committed",
            "committing",
            "committee",
            "committees",
            "common",
            "communicate",
            "communicated",
            "communication",
            "communications",
            "community",
            "compact",
            "compacts",
            "companies",
            "company",
            "complaint",
            "complaints",
            "complete",
            "completed",
            "completely",
            "completes",
            "completing",
            "complex",
            "complicated",
            "compliance",
            "complicit",
            "component",
            "components",
            "con",
            "concept",
            "concepts",
            "concern",
            "concerns",
            "conference",
            "conflict",
            "conflicted",
            "conflicts",
            "consider",
            "considered",
            "consume",
            "consumed",
            "consumes",
            "consuming",
            "contain",
            "contains",
            "contemporary",
            "content",
            "contentious",
            "contents",
            "contrast",
            "contrasting",
            "contrasts",
            "control",
            "controversial",
            "controversy",
            "conversation",
            "conversations",
            "cook",
            "cooked",
            "cooking",
            "cooks",
            "cool",
            "cooler",
            "coolest",
            "cooling",
            "corporate",
            "cost",
            "costs",
            "could",
            "countries",
            "country",
            "couple",
            "cover",
            "coverage",
            "covered",
            "covers",
            "cr",
            "crap",
            "crappy",
            "craft",
            "crafts",
            "create",
            "created",
            "creates",
            "creating",
            "creation",
            "creative",
            "credit",
            "credited",
            "crediting",
            "credits",
            "critical",
            "cross",
            "cu",
            "cum",
            "cup",
            "curious",
            "cut",
            "culture",
            "current",
            "currently",
            "customer",
            "customers",
            "cz",
            "daily",
            "dark",
            "das",
            "data",
            "date",
            "dated",
            "daten",
            "dates",
            "dati",
            "david",
            "day",
            "de",
            "deal",
            "dealed",
            "dealing",
            "deals",
            "dealt",
            "dear",
            "dearly",
            "death",
            "decide",
            "decides",
            "decision",
            "decisions",
            "decline",
            "declined",
            "declining",
            "deep",
            "defence",
            "defense",
            "degree",
            "deja",
            "del",
            "delay",
            "delayed",
            "delaying",
            "delays",
            "delete",
            "deleted",
            "deletes",
            "deleting",
            "deliver",
            "delivered",
            "deliveries",
            "delivering",
            "delivery",
            "dem",
            "demand",
            "demanded",
            "demanding",
            "demands",
            "den",
            "density",
            "depart",
            "department",
            "departments",
            "deploy",
            "deployed",
            "der",
            "design",
            "designed",
            "designing",
            "designs",
            "detail",
            "details",
            "development",
            "developments",
            "device",
            "devices",
            "did",
            "diego",
            "digital",
            "dine",
            "dined",
            "dining",
            "dines",
            "dir",
            "direct",
            "directed",
            "directing",
            "direction",
            "directional",
            "directionally",
            "director",
            "directors",
            "directs",
            "dis",
            "discourse",
            "discover",
            "discovered",
            "discovering",
            "discovers",
            "disgust",
            "disgusted",
            "disgusting",
            "disgusts",
            "display",
            "displayed",
            "displaying",
            "displays",
            "distraction",
            "distribution",
            "divide",
            "divided",
            "dividing",
            "division",
            "do",
            "dodge",
            "dodged",
            "dodging",
            "does",
            "dog",
            "dogs",
            "doing",
            "dollar",
            "dollars",
            "domestic",
            "don",
            "donald",
            "done",
            "donned",
            "door",
            "doors",
            "dos",
            "dot",
            "double",
            "doubled",
            "doubles",
            "doubling",
            "doubt",
            "doubted",
            "doubts",
            "down",
            "download",
            "downloaded",
            "downloading",
            "downloads",
            "downtown",
            "dr",
            "drank",
            "draw",
            "drift",
            "drifted",
            "drifts",
            "drink",
            "drinks",
            "drive",
            "driven",
            "driver",
            "drivers",
            "drove",
            "droves",
            "du",
            "each",
            "early",
            "earth",
            "ease",
            "easier",
            "east",
            "eastern",
            "easy",
            "eat",
            "eats",
            "eau",
            "economic",
            "economia",
            "economie",
            "eeuu",
            "edge",
            "effect",
            "effected",
            "effective",
            "effects",
            "efficiency",
            "efficient",
            "efficiently",
            "effort",
            "efforts",
            "edge",
            "edit",
            "edited",
            "editing",
            "editorial",
            "edits",
            "edu",
            "eight",
            "else",
            "em",
            "email",
            "en",
            "enable",
            "enabled",
            "enables",
            "enabling",
            "encourage",
            "encouraged",
            "encourages",
            "encouraging",
            "encounter",
            "encountered",
            "encounters",
            "end",
            "ending",
            "ends",
            "enforce",
            "enforced",
            "enforcement",
            "enforcing",
            "eng",
            "engine",
            "english",
            "enjoy",
            "enterprise",
            "enterprising",
            "entertain",
            "entertained",
            "entertains",
            "entertainment",
            "entra",
            "episode",
            "equipment",
            "era",
            "er",
            "erin",
            "es",
            "escape",
            "et",
            "ete",
            "essential",
            "est",
            "esta",
            "etc",
            "euro",
            "europe",
            "european",
            "euros",
            "even",
            "event",
            "events",
            "ever",
            "every",
            "everybody",
            "everyone",
            "everything",
            "everywhere",
            "evidence",
            "exact",
            "exactly",
            "exchange",
            "exchanged",
            "exchanges",
            "exclusive",
            "exclusively",
            "executive",
            "executives",
            "exist",
            "existed",
            "existing",
            "exists",
            "expect",
            "expected",
            "expecting",
            "expects",
            "experience",
            "expert",
            "experts",
            "expertise",
            "explore",
            "expression",
            "expressions",
            "ext",
            "extreme",
            "extremes",
            "eye",
            "face",
            "faced",
            "facebook",
            "faces",
            "facing",
            "fact",
            "factor",
            "factors",
            "facts",
            "fade",
            "faded",
            "fading",
            "fail",
            "failed",
            "failing",
            "fails",
            "failure",
            "fair",
            "fairer",
            "fairest",
            "fairly",
            "faith",
            "fall",
            "falling",
            "falls",
            "falsas",
            "falsch",
            "false",
            "falso",
            "familia",
            "families",
            "family",
            "famous",
            "far",
            "farther",
            "farthest",
            "fast",
            "faster",
            "fastest",
            "feature",
            "featured",
            "features",
            "federal",
            "fee",
            "feed",
            "feel",
            "feels",
            "fell",
            "fellow",
            "felt",
            "female",
            "few",
            "fewer",
            "fewest",
            "fi",
            "field",
            "fields",
            "fight",
            "file",
            "filed",
            "files",
            "filing",
            "filings",
            "fill",
            "filled",
            "fills",
            "final",
            "finally",
            "financial",
            "find",
            "finds",
            "fine",
            "finish",
            "finished",
            "fire",
            "fires",
            "first",
            "five",
            "flipboard",
            "flight",
            "flights",
            "floated",
            "floating",
            "floor",
            "floored",
            "floors",
            "focus",
            "focused",
            "focusing",
            "foi",
            "folk",
            "follow",
            "followed",
            "following",
            "follows",
            "food",
            "for",
            "force",
            "forced",
            "forces",
            "forcing",
            "foreign",
            "foreigner",
            "foreigners",
            "form",
            "forth",
            "forum",
            "foto",
            "fotos",
            "found",
            "four",
            "fr",
            "frame",
            "framework",
            "framing",
            "frank",
            "free",
            "freedom",
            "freiheit",
            "french",
            "fresh",
            "fringe",
            "from",
            "front",
            "fuck",
            "fucked",
            "fucker",
            "fuckers",
            "fucking",
            "fucks",
            "full",
            "function",
            "functioned",
            "functions",
            "fund",
            "fundamental",
            "funded",
            "funding",
            "funds",
            "funny",
            "fur",
            "further",
            "furthermore",
            "future",
            "fyi",
            "garden",
            "gardens",
            "gear",
            "gearing",
            "gen",
            "general",
            "generally",
            "genre",
            "genres",
            "geschichte",
            "get",
            "getting",
            "gets",
            "gift",
            "gifts",
            "girl",
            "girls",
            "globe",
            "global",
            "glowing",
            "go",
            "goal",
            "goes",
            "good",
            "goodbye",
            "goods",
            "got",
            "gotten",
            "gov",
            "govern",
            "government",
            "grad",
            "graphic",
            "gray",
            "great",
            "greater",
            "greatest",
            "greatly",
            "green",
            "grey",
            "grip",
            "gripe",
            "gripped",
            "grips",
            "group",
            "groups",
            "gross",
            "grow",
            "growing",
            "grown",
            "grows",
            "growth",
            "grune",
            "guardian",
            "guide",
            "guy",
            "haber",
            "hackernews",
            "had",
            "hallo",
            "hand",
            "handed",
            "handing",
            "hands",
            "has",
            "hat",
            "he",
            "head",
            "headline",
            "headlines",
            "health",
            "hear",
            "heard",
            "hearing",
            "heart",
            "heat",
            "heavier",
            "heaviest",
            "heavily",
            "heaviness",
            "heavy",
            "heise",
            "heisse",
            "hei√üe",
            "hello",
            "help",
            "her",
            "here",
            "herself",
            "hier",
            "high",
            "higher",
            "highest",
            "highlight",
            "highlighted",
            "highlights",
            "highly",
            "him",
            "himself",
            "hip",
            "histoire",
            "historia",
            "historic",
            "history",
            "his",
            "hit",
            "hits",
            "hk",
            "home",
            "homepage",
            "homes",
            "hope",
            "hoped",
            "hopes",
            "hoping",
            "hot",
            "how",
            "however",
            "hour",
            "hours",
            "house",
            "houses",
            "htm",
            "html",
            "http",
            "https",
            "huh",
            "human",
            "humanity",
            "humans",
            "ia",
            "id",
            "idea",
            "ideal",
            "ideals",
            "ideas",
            "if",
            "identity",
            "il",
            "im",
            "image",
            "imagery",
            "images",
            "imagine",
            "imagined",
            "imagines",
            "imagining",
            "immediate",
            "immediately",
            "impact",
            "impacted",
            "impacts",
            "impress",
            "impressive",
            "in",
            "inbox",
            "inc",
            "incident",
            "incidental",
            "incidentally",
            "incidents",
            "independent",
            "independently",
            "index",
            "industry",
            "influence",
            "influenced",
            "influencing",
            "info",
            "information",
            "infosec",
            "insight",
            "insightful",
            "insights",
            "instagram",
            "install",
            "installed",
            "installation",
            "installations",
            "instance",
            "institute",
            "institution",
            "institutional",
            "institutions",
            "integration",
            "intelligence",
            "intelligent",
            "interest",
            "interior",
            "internacional",
            "internal",
            "international",
            "internet",
            "into",
            "intro",
            "introduce",
            "introduced",
            "introducing",
            "introduction",
            "involve",
            "involved",
            "involves",
            "involving",
            "io",
            "is",
            "isolate",
            "isolated",
            "issue",
            "issued",
            "issues",
            "issuing",
            "it",
            "its",
            "itself",
            "ja",
            "je",
            "job",
            "join",
            "joined",
            "joining",
            "joins",
            "joint",
            "jointly",
            "jp",
            "jr",
            "keep",
            "keeps",
            "key",
            "keys",
            "ki",
            "kind",
            "kinds",
            "knew",
            "know",
            "knowing",
            "knowledge",
            "kultur",
            "la",
            "label",
            "labeled",
            "labeling",
            "labelling",
            "labels",
            "lack",
            "lacked",
            "lacking",
            "lacks",
            "lake",
            "landscape",
            "large",
            "larger",
            "largest",
            "las",
            "last",
            "lasts",
            "late",
            "later",
            "latest",
            "lay",
            "lays",
            "le",
            "led",
            "lead",
            "leader",
            "leaders",
            "leadership",
            "leading",
            "leads",
            "leak",
            "leaked",
            "leaks",
            "leaking",
            "learn",
            "learns",
            "learning",
            "least",
            "leave",
            "leaves",
            "leaving",
            "lee",
            "left",
            "leg",
            "legacy",
            "legacies",
            "legs",
            "legal",
            "leisure",
            // "lemonde",        // French
            "les",
            "less",
            "lesser",
            "let",
            "level",
            "levels",
            "libre",
            "lie",
            "lies",
            "life",
            "lifestyle",
            "lifetime",
            "light",
            "like",
            "liked",
            "likes",
            "likely",
            "line",
            "lined",
            "lines",
            "link",
            "linked",
            "linking",
            "links",
            "list",
            "listed",
            "listen",
            "listened",
            "listening",
            "listens",
            "listing",
            "lists",
            "little",
            "live",
            "lived",
            "lives",
            "living",
            "loan",
            "loaned",
            "loans",
            "local",
            "location",
            "locations",
            "lose",
            "loses",
            "losing",
            "loss",
            "lost",
            "lot",
            "local",
            "locally",
            "logic",
            "logical",
            "long",
            "look",
            "looked",
            "looking",
            "looks",
            "los",
            "love",
            "loved",
            "loves",
            "low",
            "lower",
            "lowest",
            "ma",
            "mad",
            "made",
            "magazine",
            "magazines",
            "mail",
            "main",
            "mainly",
            "major",
            "majority",
            "majorly",
            "make",
            "makes",
            "making",
            "mal",
            "male",
            "man",
            "manipulate",
            "manipulated",
            "manipulating",
            "many",
            "map",
            "mapping",
            "maps",
            "mark",
            "marked",
            "marker",
            "market",
            "marketing",
            "marks",
            "mas",
            "mass",
            "master",
            "mastered",
            "mastodon",
            "material",
            "materials",
            "matter",
            "max",
            "maximum",
            "may",
            "maybe",
            "me",
            "mean",
            "meaning",
            "meaningful",
            "meaningfully",
            "meaningless",
            "means",
            "meant",
            "media",
            "medias",
            "medien",
            "medium",
            "meduza",
            "meet",
            "meeting",
            "meetings",
            "melt",
            "melted",
            "melting",
            "member",
            "members",
            "membership",
            "memories",
            "memory",
            "men",
            "menschen",
            "mention",
            "mentioned",
            "mentions",
            "mere",
            "merely",
            "message",
            "messages",
            "messaging",
            "met",
            "metro",
            "middle",
            "million",
            "millions",
            "min",
            "mind",
            "mine",
            "minimal",
            "minimally",
            "minimum",
            "mins",
            "minute",
            "minutes",
            "mix",
            "mixed",
            "mixes",
            "mixing",
            "mode",
            "model",
            "models",
            "modern",
            "monde",
            "month",
            "months",
            "more",
            "moreover",
            "morning",
            "most",
            "mostly",
            "mother",
            "move",
            "moved",
            "movement",
            "moves",
            "moving",
            "mr",
            "mrs",
            "ms",
            "mstdn",
            "much",
            "mucho",
            "mundo",
            "must",
            "my",
            "na",
            "nation",
            "national",
            "nationality",
            "nations",
            "natural",
            "ne",
            "near",
            "nearby",
            "nearer",
            "nears",
            "nearly",
            "negative",
            "negotiate",
            "negotiated",
            "negotiates",
            "negotiating",
            "neither",
            "net",
            "network",
            "networks",
            "neutral",
            "never",
            "nevertheless",
            "new",
            "newer",
            "newest",
            "newly",
            "news",
            "next",
            "nice",
            "nicely",
            "nicer",
            "nicest",
            "niet",
            "nieuws",
            "nil",
            "night",
            "nine",
            "nl",
            "no",
            "nobody",
            "noir",
            "noire",
            "non",
            "none",
            "nonsense",
            "nope",
            "nor",
            "nord",
            "north",
            "northern",
            "nos",
            "not",
            "note",
            "noted",
            "notes",
            "nothing",
            "notice",
            "noticeable",
            "notices",
            "noticed",
            "noticias",
            "noting",
            "notizie",
            "novel",
            "now",
            "number",
            "nytimes",
            "nz",
            "oc",
            "odd",
            "oder",
            "of",
            "off",
            "offensive",
            "office",
            "offices",
            "official",
            "officials",
            "offline",
            "oft",
            "often",
            "oh",
            "ok",
            "okay",
            "ol",
            "old",
            "older",
            "oldest",
            "omg",
            "on",
            "once",
            "one",
            "online",
            "ooh",
            "oops",
            "open",
            "opinion",
            "opinions",
            "opt",
            "optimal",
            "optimize",
            "optimized",
            "optimum",
            "options",
            "or",
            "orange",
            "org",
            "organic",
            "organically",
            "organisation",
            "organisations",
            "organization",
            "organizations",
            "organize",
            "organized",
            "organizes",
            "organizing",
            "origin",
            "origins",
            "original",
            "originale",
            "originals",
            "originally",
            "other",
            "others",
            "our",
            "out",
            "outcome",
            "outcomes",
            "outside",
            "over",
            "overall",
            "own",
            "owner",
            "pa",
            "pace",
            "pack",
            "package",
            "packages",
            "packed",
            "packs",
            "paid",
            "pan",
            "panel",
            "paper",
            "papier",
            "papieros",
            "papiers",
            "park",
            "parked",
            "parking",
            "part",
            "partly",
            "participate",
            "participated",
            "participates",
            "participating",
            "participation",
            "participations",
            "participatory",
            "particular",
            "particularly",
            "parties",
            "partisan",
            "partner",
            "partners",
            "partnership",
            "partnerships",
            "parts",
            "party",
            "pas",
            "pasado",
            "pass",
            "passed",
            "passion",
            "past",
            "pat",
            "patch",
            "path",
            "paths",
            "pattern",
            "patterns",
            "paul",
            "pay",
            "pays",
            "people",
            "peoples",
            "per",
            "performance",
            "performances",
            "permission",
            "perspective",
            "perspectives",
            "pete",
            "peter",
            "photo",
            "photograph",
            "photos",
            "pic",
            "pick",
            "picked",
            "picking",
            "picks",
            "pics",
            "picture",
            "pictures",
            "piece",
            "pink",
            "pixelfed",
            "pl",
            "place",
            "placement",
            "placements",
            "places",
            "placed",
            "plan",
            "planet",
            "planned",
            "planning",
            "plans",
            "plant",
            "planted",
            "platform",
            "platforms",
            "play",
            "playbook",
            "played",
            "player",
            "players",
            "playing",
            "plays",
            "please",
            "pleased",
            "pleasing",
            "plot",
            "pluralistic",
            "plus",
            "pm",
            "poetic",
            "point",
            "pointed",
            "points",
            "pol",
            "pole",
            "poles",
            "policies",
            "policy",
            "politica",
            "political",
            "politicas",
            "politics",
            "politik",
            "politiken",
            "politique",
            "politiques",
            "politisch",
            "polititian",
            "poll",
            "pop",
            "popped",
            "popping",
            "pops",
            "popular",
            "popularly",
            "por",
            "portfolio",
            "pose",
            "posed",
            "poses",
            "posing",
            "positive",
            "possibility",
            "possibilities",
            "possible",
            "possibly",
            "post",
            "posted",
            "posting",
            "posts",
            "pour",
            "power",
            "powered",
            "powering",
            "powers",
            "practice",
            "practices",
            "pre",
            "precise",
            "precisely",
            "precision",
            "predict",
            "predicted",
            "predicting",
            "prediction",
            "predicts",
            "president",
            "presidente",
            "presidents",
            "press",
            "presse",
            "pretty",
            "prevent",
            "preventable",
            "prevented",
            "preventing",
            "prevents",
            "previous",
            "previously",
            "principle",
            "principles",
            "print",
            "printed",
            "private",
            "privately",
            "pro",
            "problem",
            "problematic",
            "problemo",
            "problems",
            "probably",
            "procedure",
            "procedures",
            "proceso",
            "process",
            "processed",
            "processes",
            "processing",
            "produce",
            "product",
            "production",
            "products",
            "programs",
            "progress",
            "progressed",
            "progressing",
            "progression",
            "progressions",
            "project",
            "projects",
            "prominent",
            "promise",
            "promises",
            "promo",
            "promote",
            "promoted",
            "promotes",
            "promoting",
            "promotion",
            "promotions",
            "prompted",
            "prompting",
            "proper",
            "properly",
            "property",
            "protect",
            "protected",
            "protecting",
            "protection",
            "protects",
            "provide",
            "provided",
            "provides",
            "ps",
            "pub",
            "public",
            "publicly",
            "publish",
            "published",
            "publishing",
            "pull",
            "pulling",
            "pulls",
            "pump",
            "pumped",
            "pumping",
            "pumps",
            "push",
            "pushed",
            "pushes",
            "put",
            "puts",
            "quality",
            "que",
            "question",
            "questioned",
            "questions",
            "quick",
            "quickly",
            "quite",
            "quote",
            "quoted",
            "quotes",
            "quoting",
            "race",
            "raced",
            "racing",
            "raise",
            "raised",
            "raises",
            "raising",
            "ran",
            "random",
            "range",
            "ranges",
            "ranging",
            "rank",
            "ranking",
            "rankings",
            "rate",
            "rates",
            "raw",
            "ra",
            "re",
            "reaction",
            "reactions",
            "read",
            "reader",
            "readers",
            "reads",
            "reading",
            "ready",
            "readying",
            "real",
            "reality",
            "realize",
            "realized",
            "realizes",
            "realizing",
            "really",
            "reason",
            "reasoned",
            "reasoning",
            "reasons",
            "receive",
            "received",
            "receives",
            "receiving",
            "recent",
            "recently",
            "rechts",
            "record",
            "recorded",
            "recording",
            "recordings",
            "records",
            "recovery",
            "red",
            "redo",
            "reduce",
            "reduced",
            "reduces",
            "reducing",
            "reduction",
            "reductions",
            "reflect",
            "reflected",
            "reflecting",
            "reflects",
            "region",
            "regional",
            "regions",
            "rejoin",
            "rejoined",
            "relate",
            "related",
            "relates",
            "relating",
            "release",
            "released",
            "releases",
            "releasing",
            "relevant",
            "relax",
            "relaxed",
            "relaxing",
            "reliable",
            "relief",
            "remain",
            "remaining",
            "remains",
            "remember",
            "remembered",
            "remembering",
            "rep",
            "repair",
            "repaired",
            "repairing",
            "repeat",
            "repeated",
            "repeating",
            "repeats",
            "replace",
            "replaced",
            "replaces",
            "replacing",
            "report",
            "reporter",
            "reports",
            "repost",
            "reposted",
            "reposting",
            "reputation",
            "reputations",
            "require",
            "required",
            "requires",
            "requisite",
            "reserve",
            "reset",
            "resets",
            "resign",
            "resigned",
            "resigning",
            "resigns",
            "resilience",
            "resist",
            "respect",
            "respected",
            "respecting",
            "respects",
            "respond",
            "responds",
            "response",
            "responses",
            "responsibilities",
            "responsibility",
            "responsible",
            "responsibly",
            "rest",
            "rests",
            "restore",
            "restored",
            "restores",
            "restoring",
            "result",
            "resulted",
            "results",
            "ret",
            "retail",
            "rete",
            "return",
            "returned",
            "returning",
            "returns",
            "reuse",
            "reused",
            "reuses",
            "reusing",
            "reveal",
            "revealed",
            "revealing",
            "reveals",
            "revenue",
            "revenues",
            "review",
            "reviewed",
            "reviewing",
            "reviews",
            "right",
            "rip",
            "ripe",
            "ripped",
            "ripping",
            "rise",
            "risk",
            "risks",
            "ro",
            "rob",
            "robert",
            "road",
            "rocks",
            "roll",
            "rolled",
            "rolling",
            "rolls",
            "room",
            "rooms",
            "rose",
            "round",
            "rounds",
            "rule",
            "ruled",
            "rules",
            "run",
            "running",
            "rush",
            "rushed",
            "rushes",
            "rushing",
            "sa",
            "sad",
            "safety",
            "said",
            "sale",
            "sales",
            "same",
            "san",
            "sans",
            "save",
            "saved",
            "saves",
            "saving",
            "say",
            "says",
            "scale",
            "scare",
            "scared",
            "scares",
            "scaring",
            "scary",
            "scene",
            "scenic",
            "scenes",
            "scheme",
            "se",
            "sean",
            "search",
            "searched",
            "searches",
            "searching",
            "season",
            "second",
            "seconds",
            "section",
            "sections",
            "sector",
            "sectors",
            "securite",
            "security",
            "see",
            "seen",
            "seeking",
            "seems",
            "seen",
            "sees",
            "seguridad",
            "self",
            "sell",
            "selling",
            "sells",
            "sen",
            "send",
            "sense",
            "sent",
            "sentence",
            "series",
            "serious",
            "seriously",
            "service",
            "services",
            "session",
            "set",
            "sets",
            "setting",
            "settings",
            "seth",
            "seven",
            "several",
            "severe",
            "shared",
            "sharing",
            "sharp",
            "sharper",
            "shape",
            "share",
            "she",
            "shit",
            "shitty",
            "shittier",
            "shop",
            "shopped",
            "shopping",
            "short",
            "shorter",
            "shortest",
            "shorts",
            "should",
            "show",
            "showed",
            "showing",
            "shown",
            "shows",
            "si",
            "side",
            "sides",
            "sign",
            "signed",
            "signing",
            "signs",
            "similar",
            "similarly",
            "simple",
            "simpler",
            "simplest",
            "simply",
            "since",
            "sit",
            "sits",
            "situation",
            "situations",
            "six",
            "sk",
            "skill",
            "skilled",
            "skills",
            "slightly",
            "slow",
            "slower",
            "slowest",
            "small",
            "smaller",
            "smallest",
            "smart",
            "snap",
            "snaps",
            "snapped",
            "snapping",
            "so",
            "sobre",
            "social",
            "society",
            "soft",
            "softer",
            "softest",
            "softly",
            "some",
            "somebody",
            "someone",
            "sometime",
            "solution",
            "solutions",
            "solve",
            "solved",
            "solves",
            "solving",
            "soul",
            "sound",
            "sounded",
            "sounding",
            "sounds",
            "source",
            "sourced",
            "sources",
            "sourcing",
            "south",
            "southern",
            "space",
            "spass",
            "speak",
            "speaking",
            "speaks",
            "special",
            "specialization",
            "specific",
            "specifics",
            "specifically",
            "speech",
            "speeches",
            "spend",
            "spende",
            "spending",
            "spends",
            "spent",
            "spiel",
            "spielzug",
            "sphere",
            "spheres",
            "spin",
            "spins",
            "spoke",
            "spotted",
            "spring",
            "spun",
            "st",
            "stadt",
            "stand",
            "standing",
            "stands",
            "standard",
            "standards",
            "star",
            "stars",
            "start",
            "started",
            "starts",
            "state",
            "states",
            "status",
            "stem",
            "stemmed",
            "stemming",
            "stems",
            "step",
            "stepped",
            "steps",
            "stepping",
            "steve",
            "stick",
            "sticking",
            "sticks",
            "still",
            "stillness",
            "stock",
            "stone",
            "stood",
            "stop",
            "stopped",
            "stopping",
            "stops",
            "stories",
            "story",
            "strange",
            "strategies",
            "strategy",
            "stream",
            "streamed",
            "streaming",
            "street",
            "streets",
            "strikes",
            "strength",
            "strengthen",
            "strengthened",
            "strengthening",
            "strengths",
            "strong",
            "stronger",
            "strongest",
            "stuck",
            "study",
            "studying",
            "studied",
            "studies",
            "stuff",
            "sturm",
            "style",
            "styled",
            "styles",
            "subject",
            "subjects",
            "subj",
            "su",
            "substack",
            "such",
            "success",
            "successes",
            "successful",
            "sudden",
            "suddenly",
            "summer",
            "supplied",
            "supplier",
            "suppliers",
            "supplies",
            "supply",
            "support",
            "sur",
            "sure",
            "surely",
            "sweet",
            "sweeter",
            "sweetest",
            "sweetly",
            "system",
            "systems",
            "tag",
            "tags",
            "take",
            "takes",
            "taken",
            "takeover",
            "takeovers",
            "taking",
            "talk",
            "talked",
            "talking",
            "talks",
            "tall",
            "taller",
            "tan",
            "tap",
            "tapped",
            "tapping",
            "taps",
            "tarde",
            "task",
            "team",
            "teamed",
            "teaming",
            "teams",
            "tech",
            "template",
            "ten",
            "tend",
            "tends",
            "test",
            "testing",
            "text",
            "than",
            "thank",
            "thanked",
            "thanks",
            "that",
            "the",
            "theguardian",
            "them",
            "theme",
            "themes",
            "themselves",
            "then",
            "their",
            "there",
            "these",
            "they",
            "thing",
            "things",
            "think",
            "thinking",
            "thinks",
            "this",
            "those",
            "thought",
            "thoughts",
            "thousand",
            "thousands",
            "threads",
            "three",
            "through",
            "throughout",
            "thumbnail",
            "ticket",
            "tie",
            "ties",
            "til",
            "tilt",
            "tilted",
            "tilts",
            "tim",
            "time",
            "times",
            "tiny",
            "tip",
            "tipped",
            "tipping",
            "tips",
            "title",
            "titled",
            "titles",
            "to",
            "today",
            "together",
            "tom",
            "ton",
            "tonne",
            "tonnes",
            "tons",
            "too",
            "tool",
            "tools",
            "top",
            "topstories",
            "total",
            "touch",
            "tough",
            "tougher",
            "toughest",
            "town",
            "track",
            "tracked",
            "tracking",
            "trade",
            "traded",
            "trades",
            "trading",
            "tradition",
            "traditional",
            "traditions",
            "trail",
            "train",
            "training",
            "transfer",
            "transferred",
            "transferring",
            "transfers",
            "transformation",
            "transformations",
            "transformative",
            "transport",
            "transported",
            "transporting",
            "transports",
            "trap",
            "trapped",
            "traps",
            "travel",
            "treat",
            "treats",
            "trending",
            "tried",
            "trip",
            "true",
            "trust",
            "trusted",
            "trusts",
            "trustworthy",
            "truth",
            "try",
            "trying",
            "ts",
            "tue",
            "turn",
            "turned",
            "turning",
            "turns",
            "tv",
            "two",
            "type",
            "types",
            "typical",
            "typically",
            "ua",
            "uk",
            "un",
            "una",
            "uncertain",
            "uncertainty",
            "und",
            "under",
            "understand",
            "understanding",
            "understands",
            "understood",
            "unfinished",
            "unique",
            "uniquely",
            "united",
            "unity",
            "uno",
            "uns",
            "until",
            "untrustworthy",
            "unusual",
            "unusually",
            "up",
            "update",
            "updated",
            "updates",
            "updating",
            "upon",
            "urban",
            "us",
            "usa",
            "use",
            "used",
            "user",
            "users",
            "uses",
            "using",
            "usual",
            "usually",
            "valley",
            "valleys",
            "value",
            "valued",
            "values",
            "varieties",
            "variety",
            "various",
            "variously",
            "ve",
            "vehicle",
            "ver",
            "verified",
            "verify",
            "version",
            "versions",
            "very",
            "via",
            "victim",
            "video",
            "videos",
            "view",
            "views",
            "viewed",
            "viewing",
            "visit",
            "visited",
            "visiting",
            "visitor",
            "visitors",
            "visits",
            "visual",
            "voice",
            "von",
            "vuelta",
            "vs",
            "wahrun",
            "wait",
            "waiting",
            "waits",
            "wall",
            "walk",
            "walked",
            "walking",
            "walks",
            "want",
            "wanted",
            "wanting",
            "wants",
            "was",
            "wash",
            "washed",
            "washing",
            "washingtonpost",
            "waste",
            "wasted",
            "wasting",
            "watch",
            "watched",
            "watching",
            "water",
            "wave",
            "waved",
            "waver",
            "waves",
            "way",
            "we",
            "weak",
            "weaker",
            "weakest",
            "wear",
            "wears",
            "web",
            "website",
            "websites",
            "week",
            "weekend",
            "weekends",
            "weekly",
            "weeks",
            "weigh",
            "weighing",
            "weird",
            "weirder",
            "weirdest",
            "weirdly",
            "weirdness",
            "welcome",
            "well",
            "welt",
            "weltraum",
            "wenn",
            "went",
            "were",
            "west",
            "western",
            "wetter",
            "what",
            "when",
            "where",
            "whether",
            "which",
            "while",
            "white",
            "who",
            "whole",
            "whom",
            "whose",
            "why",
            "wide",
            "wider",
            "widest",
            "wild",
            "will",
            "willing",
            "win",
            "winning",
            "winter",
            "wip",
            "wird",
            "wirtschaft",
            "wissen",
            "with",
            "within",
            "without",
            "woman",
            "women",
            "won",
            "wonder",
            "wondered",
            "wondering",
            "wonders",
            "word",
            "wording",
            "words",
            "wore",
            "work",
            "worked",
            "worker",
            "workers",
            "working",
            "works",
            "world",
            "worldview",
            "worried",
            "worry",
            "worrying",
            "worse",
            "worst",
            "would",
            "wow",
            "write",
            "writes",
            "writing",
            "wrong",
            "wsj",
            "www",
            "ycombinator",
            "ya",
            "yay",
            "yea",
            "yeah",
            "year",
            "years",
            "yeh",
            "yellow",
            "yep",
            "yes",
            "yesterday",
            "yet",
            "yo",
            "yonhapinfomax",
            "you",
            "young",
            "younger",
            "youngest",
            "your",
            "yourself",
            "yourselves",
            "youtube",
            "za",
            "zach",
            "ze",
            "zeit",
            "zh",
            "zu", // German
        ]),
    };
    trending = {
        daysToCountTrendingData: 3,
        links: {
            numTrendingLinksPerServer: 20, // How many trending links to pull from each server
        },
        tags: {
            invalidTags: [
                "government",
                "news",
                "photography",
            ],
            maxToots: 200,
            numTagsPerServer: 20,
            numTags: 20,
            numTootsPerTag: 15, // How many toots to pull for each trending tag
        },
        toots: {
            numTrendingTootsPerServer: 30, // How many trending toots to pull per server // TODO: unused?
        },
    };
    /** Construct a new {@linkcode Config} instance, validate it, and logs the validated config. */
    constructor() {
        this.validate(this);
        console.debug(`${LOG_PREFIX} validated:`, this);
    }
    ;
    /**
     * Computes the minimum value of {@linkcode minutesUntilStale} for all {@linkcode enums:FediverseCacheKey}
     * values. Warns if any required keys are missing a value.
     * @returns {number} The minimum minutes until trending data is considered stale, or 60 if not all keys are configured.
     */
    minTrendingMinutesUntilStale() {
        const trendStalenesses = Object.values(enums_1.FediverseCacheKey)
            .map(k => this.api.data[k]?.minutesUntilStale)
            .filter(Boolean);
        if (trendStalenesses.length != Object.values(enums_1.FediverseCacheKey).length) {
            console.warn(`${LOG_PREFIX} Not all FediverseCacheKey values have minutesUntilStale configured!`);
            return 60;
        }
        else {
            return Math.min(...trendStalenesses);
        }
    }
    /**
     * Sets the locale, language, and country for the application if supported.
     * Falls back to defaults if the locale is invalid or unsupported.
     * @param {string} [locale] - The locale string (e.g. "en-CA").
     */
    setLocale(locale) {
        locale ??= DEFAULT_LOCALE;
        if (!LOCALE_REGEX.test(locale)) {
            console.warn(`${LOG_PREFIX} Invalid locale "${locale}", using default "${DEFAULT_LOCALE}"`);
            return;
        }
        this.locale.locale = locale;
        const [language, country] = locale.split("-");
        this.locale.country = country || DEFAULT_COUNTRY;
        if (language) {
            if (language == DEFAULT_LANGUAGE || language in this.fediverse.foreignLanguageServers) {
                this.locale.language = language;
            }
            else {
                console.warn(`${LOG_PREFIX} Language "${language}" unsupported, defaulting to "${this.locale.defaultLanguage}"`);
            }
        }
    }
    /**
     * Validates config values for correctness (e.g. checks for NaN or empty strings).
     * @private
     * @param {ConfigType | object} [cfg] - The config object or sub-object to validate.
     * @throws {Error} If any config value is invalid.
     */
    validate(cfg) {
        if (!cfg) {
            if (!this.api.data[enums_1.CacheKey.HOME_TIMELINE_TOOTS]?.lookbackForUpdatesMinutes) {
                throw new Error(`${LOG_PREFIX} HOME_TIMELINE_TOOTS lookbackForUpdatesMinutes is not set!`);
            }
        }
        // Check that all the values are valid
        Object.entries(cfg || this).forEach(([key, value]) => {
            if (typeof value === "object") {
                this.validate(value);
            }
            else if (typeof value == "number" && isNaN(value)) {
                const msg = `value at ${key} is NaN`;
                console.error(`${LOG_PREFIX} ${msg}`);
                throw new Error(msg);
            }
            else if (typeof value == "string" && value.length == 0) {
                const msg = `value at ${key} is empty string`;
                console.error(`${LOG_PREFIX} ${msg}`);
                throw new Error(msg);
            }
        });
    }
}
;
const config = new Config();
exports.config = config;
// Quick load mode settings
if (environment_helpers_1.isQuickMode) {
    console.debug(`${LOG_PREFIX} QUICK_MODE enabled, applying debug settings...`);
    config.api.data[enums_1.CacheKey.HOME_TIMELINE_TOOTS].initialMaxRecords = 240;
    config.api.data[enums_1.CacheKey.HOME_TIMELINE_TOOTS].lookbackForUpdatesMinutes = 10;
    config.api.backgroundLoadIntervalMinutes = enums_1.SECONDS_IN_HOUR;
    config.favouritedTags.numTags = 5;
    config.toots.maxTimelineLength = 1500;
    config.participatedTags.numTags = 10;
    config.trending.tags.numTags = 10;
}
// Debug mode settings
if (environment_helpers_1.isDebugMode) {
    console.debug(`${LOG_PREFIX} FEDIALGO_DEBUG mode enabled, applying debug settings...`);
    config.api.data[enums_1.CacheKey.FOLLOWED_ACCOUNTS].initialMaxRecords = 160;
    config.api.data[enums_1.CacheKey.FOLLOWED_TAGS].minutesUntilStale = 60;
    config.api.data[enums_1.CacheKey.FOLLOWERS].initialMaxRecords = 320;
    config.api.data[enums_1.CacheKey.NOTIFICATIONS].minutesUntilStale = 10;
    config.api.data[enums_1.CacheKey.RECENT_USER_TOOTS].minutesUntilStale = 5;
    config.api.backgroundLoadIntervalMinutes = 5;
    config.api.maxRecordsForFeatureScoring = 2500;
    config.toots.saveChangesIntervalSeconds = 15;
}
;
// Heavy load test settings
if (environment_helpers_1.isLoadTest) {
    console.debug(`${LOG_PREFIX} LOAD_TEST mode enabled, applying debug settings...`);
    config.api.data[enums_1.CacheKey.HOME_TIMELINE_TOOTS].initialMaxRecords = 2500;
    config.toots.maxTimelineLength = 5000;
    config.api.maxRecordsForFeatureScoring = 15000;
    config.participatedTags.maxToots = 500;
    config.participatedTags.numTags = 50;
    config.participatedTags.numTootsPerTag = 10;
    config.trending.tags.maxToots = 1000;
    config.trending.tags.numTags = 40;
}
;
//# sourceMappingURL=config.js.map